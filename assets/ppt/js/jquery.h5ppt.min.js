
$body=$('body');$.h5ppt={config:[],pageSize:0,init:function(e){var f={time:1000};var e=$.extend(f,e);init(e);function init(a){$.h5ppt.pageSize=$('.hp-page').length;addNavBar(a.navColor)}function addNavBar(b){var c=$('<div class="hp-pagination"></div>').appendTo($body);var d=$('<ul class="hp-pagination-ul"></ul>').appendTo(c);for(var i=0;i<$.h5ppt.pageSize;i++){if(i==0){d.append($('<li class="hp-pagination-li-active"><span class="hp-pagination-span">'+i+'</span></li>'))}else{d.append($('<li class="hp-pagination-li"><span class="hp-pagination-span">'+i+'</span></li>'))}}c.append('<div class="hp-pagination-bar"></div>');c.find(".hp-pagination-bar").animate({width:$body.width()/$.h5ppt.pageSize});if(b){c.find(".hp-pagination-span").css('color',b)}d.delegate('li','click',navClicked);d.bind('click',function(a){a.stopPropagation()})}function navClicked(){$('*').finish();var a=$(this);var b=$('.hp-ppt .hp-page:nth-child('+($.h5ppt.pageNo+1)+')');var c=$.h5ppt.config[$.h5ppt.pageNo].out;if(c){c.wholePage=true;c.inside=false;c.onComplete=function(){pageIn(a)};b.h5move(c)}else{pageIn(a)}}function pageIn(a){var b=parseInt(a.find('span').text());$('.hp-pagination .hp-pagination-bar').animate({width:b*($body.width()/$.h5ppt.pageSize)});$('.hp-pagination-li-active').removeClass('hp-pagination-li-active').addClass('hp-pagination-li');a.removeClass('hp-pagination-li').addClass('hp-pagination-li-active');var c=$('.hp-ppt .hp-page:nth-child('+(b+1)+')');var d=$.h5ppt.config[b].in;d.wholePage=true;$.h5ppt.pageNo=b;$.h5ppt.stepNo=0;d.onComplete=function(){$.h5ppt.display()}c.h5move(d)}},start:function(){$.h5ppt.pageNo=0;$.h5ppt.stepNo=0;$('.hp-page').each(function(c){$.h5ppt.config[c]={out:$(this).attr('data-out')?eval('a={'+$(this).attr('data-out')+'}'):null,in:$(this).attr('data-in')?eval('a={'+$(this).attr('data-in')+'}'):{}}var d=[0];$(this).find('[data-step]').css("visibility","hidden").each(function(a){d.push($(this).attr('data-step'))});d.sort(function(a,b){return a-b});var e=[d[0]];for(var i=1;i<d.length;i++){if(d[i]!=e[e.length-1]){e.push(d[i])}}$.h5ppt.config[c].orderList=e});$body.bind('click',function(){$.h5ppt.display()});$.h5ppt.display()},display:function(m){if($.h5ppt.stepNo==$.h5ppt.config[$.h5ppt.pageNo].orderList.length){$.h5ppt.stepNo=0;$.h5ppt.pageNo+=1;$('.hp-pagination .hp-pagination-bar').animate({width:($.h5ppt.pageNo+1)*($body.width()/$.h5ppt.pageSize)});$('.hp-pagination-li-active').removeClass('hp-pagination-li-active').addClass('hp-pagination-li');$('.hp-pagination-li:nth-child('+($.h5ppt.pageNo+1)+')').removeClass('hp-pagination-li').addClass('hp-pagination-li-active');display('page',m)}else{display('step',m);$.h5ppt.stepNo+=1}function display(c,d){var p=$.h5ppt.pageNo;var l=$.h5ppt.stepNo;var e=!d;var f=$('.hp-page:nth-child('+(p+1)+')');if(f.length==0){$.h5ppt.pageNo=0;$.h5ppt.stepNo=0;$.h5ppt.over();return}if(c=='page'){$(".hp-virtualComponent").remove();var g=$('.hp-page:nth-child('+(p)+')');var h=$.h5ppt.config[p-1].out;if(h){h.inside=false;h.wholePage=true;h.onComplete=function(){var a=$.h5ppt.config[p].in;a.wholePage=true;a.onComplete=function(){$.h5ppt.display()}f.h5move(a)}g.h5move(h)}else{var i=$.h5ppt.config[p].in;i.wholePage=true;i.onComplete=function(){$.h5ppt.display()}f.h5move(i)}}else{var j=$.h5ppt.config[p].orderList[l];var k=f.find('.hp-step[data-step='+j+']');k.each(function(){var a=$(this).attr('data-in')?eval('a={'+$(this).attr('data-in')+'}'):{}var b=$(this).attr('data-out')?eval('a={'+$(this).attr('data-out')+'}'):{}if(e){$(this).h5move(a)}else{$(this).h5move(b)}})}}},over:function(){}};$.h5ppt.defaults={type:'slide',angle:0,time:1000,wholePage:false,inside:true,rotate:0,scale:1,fade:false,delay:0,onComplete:function(){}};(function($){$.fn.h5move=function(b){var c={type:$.h5ppt.defaults.type,angle:$.h5ppt.defaults.angle,time:$.h5ppt.defaults.time,wholePage:$.h5ppt.defaults.wholePage,inside:$.h5ppt.defaults.inside,rotate:$.h5ppt.defaults.rotate,scale:$.h5ppt.defaults.scale,delay:$.h5ppt.defaults.delay,fade:$.h5ppt.defaults.fade}var b=$.extend(c,b);if(b.angle=='random'){b.angle=Math.random()*360}this.each(function(){if(b.wholePage){$(this).find('.hp-step').css('visibility','hidden');if(b.inside){$(this).find('.hp-step:not([data-step])').css('visibility','visible')}}var a=$(this);setTimeout(function(){if(b.type=='slide'){slide(a,b)}else if(b.type=='follow'){follow(a,b)}else if(b.type=='none'){none(a,b)}else if(b.type=='pull'){pull(a,b)}else if(b.type=='push'){push(a,b)}else if(b.type=='extend'){extend(a,b)}},b.delay)})};function extend(a,b){var c=a[0]?a[0].tagName:'div';var d=$('<'+c+'></'+c+'>').appendTo($body).attr('style',a.attr('style'));d.html(a.html()).attr('class',a.attr('class')).addClass('hp-virtualComponent').css({position:'absolute',left:a.offset().left,top:a.offset().top,visibility:'visible'});a.css("visibility",'hidden');if(b.wholePage){d.css({top:0,left:0});if(!b.inside){d.find('.hp-step').css("visibility",'visible')}}var e=1;var f=1
    if(b.inside){d.css({transform:'scale(0.00001,0.00001)'})}else{d.css({transform:'scale(1,1)'});e=0.00001;f=0.00001}d.animate({transform:'scale('+e+','+f+')'},b.time,function(){d.remove();a.css("visibility",'visible');if(b.wholePage){$('.hp-page').offset({top:$body.height()});a.offset({top:0,left:0});if(!b.inside){d.find('[data-step]').css("visibility",'visible')}}if(b.onComplete){b.onComplete()}})}function push(a,b){var c=a[0]?a[0].tagName:'div';var d=$('<'+c+'></'+c+'>').appendTo($body).attr('style',a.attr('style'));d.html(a.html()).attr('class',a.attr('class')).addClass('hp-virtualComponent').css({position:'absolute',left:a.offset().left,top:a.offset().top,visibility:'visible'});a.css("visibility",'hidden');if(b.wholePage){d.css({top:0,left:0});if(!b.inside){d.find('[data-step]').css("visibility",'visible')}}var e=1;var f=1;var g=b.angle<0?b.angle%360+360:b.angle%360;if(g<45||g>=315){d.css({transformOrigin:'right'});e=0.0001}else if(g>=45&&g<135){d.css({transformOrigin:'bottom'});f=0.0001}else if(g>=135&&g<225){d.css({transformOrigin:'left'});e=0.0001}else if(g>=225&&g<315){d.css({transformOrigin:'top'});f=0.0001}d.animate({transform:'scale('+e+','+f+')'},b.time,function(){d.remove();if(b.onComplete){b.onComplete()}})}function pull(a,b){var c=a[0]?a[0].tagName:'div';var d=$('<'+c+'></'+c+'>').appendTo($body).attr('style',a.attr('style'));d.html(a.html()).attr('class',a.attr('class')).addClass('hp-virtualComponent').css({position:'absolute',left:a.offset().left,top:a.offset().top,visibility:'visible'});a.css("visibility",'hidden');if(b.wholePage){d.css({top:0,left:0});if(!b.inside){d.find('[data-step]').css("visibility",'visible')}}var e=b.angle<0?b.angle%360+360:b.angle%360;if(e<45||e>=315){d.css({transform:'scale(0.0001,1)',transformOrigin:'right'})}else if(e>=45&&e<135){d.css({transform:'scale(1,0.0001)',transformOrigin:'bottom'})}else if(e>=135&&e<225){d.css({transform:'scale(0.0001,1)',transformOrigin:'left'})}else if(e>=225&&e<315){d.css({transform:'scale(1,0.0001)',transformOrigin:'top'})}d.animate({transform:'scale(1,1)'},b.time,function(){d.remove();a.css("visibility",'visible');if(b.wholePage){$('.hp-page').offset({top:$body.height()});a.offset({top:0,left:0});if(!b.inside){d.find('[data-step]').css("visibility",'visible')}}if(b.onComplete){b.onComplete()}})}function none(a,b){var c=b.inside?1:0;var d=a[0]?a[0].tagName:'div';var e=$('<'+d+'></'+d+'>').appendTo($body).attr('style',a.attr('style'));e.html(a.html()).attr('class',a.attr('class')).addClass('hp-virtualComponent').css({visibility:'visible'});a.css('visibility','hidden');e.animate({transform:'rotate('+b.rotate+'deg) scale('+b.scale+')',opacity:c},b.time,function(){if(b.inside){a.css('visibility','visible')}e.remove();if(b.onComplete){b.onComplete()}})}function follow(b,c){var d=$('<div></div>').appendTo($body);d.html(b.html()).attr('class',b.attr('class')).addClass('hp-virtualComponent').css({position:'absolute',left:b.offset().left,top:b.offset().top,visibility:'visible'});var e=d.text();d.text("");for(var i=0;i<e.length;i++){d.append($('<span>'+e.charAt(i)+'</span>'))}d.children('').addClass(b.attr('class')).css({font:b.css('font'),fontSize:b.css('font-size'),fontWeight:b.css('font-weight')});d.children().each(function(i){$(this).css("visibility",'hidden');var a=copy(c);a.type='slide';a.delay=c.delay+(i*200);if(i==d.children().length-1){a.onComplete=function(){d.remove();$(b.css("visibility",'visible'))}}$(this).h5move(a)})}function copy(a){var b={};for(var c in a){b[c]=a[c]}return b}function slide(a,b){var c=0;var d=0;var e=1;var f=a[0]?a[0].tagName:'div';var g=$('<'+f+'></'+f+'>').appendTo($body).attr('style',a.attr('style'));g.html(a.html()).attr('class',a.attr('class')).addClass('hp-virtualComponent').css({position:'absolute',left:a.offset().left,top:a.offset().top,visibility:'visible'});a.css('visibility','hidden');if(!b.wholePage){c=a.offset().left;d=a.offset().top}else{if(!b.inside){g.find('[data-step]').css("visibility",'visible')}}var h=getLocation(c,d,b.angle,g);if(b.inside){g.css({left:h.left,top:h.top});if(b.fade){g.css('opacity',0)}}else{c=h.left;d=h.top;e=0}g.animate({left:c,top:d,transform:'rotate('+b.rotate+'deg) scale('+b.scale+')',opacity:e},b.time,function(){if(b.inside){a.css('visibility','visible')}if(b.wholePage){$('.hp-page').offset({top:$body.height()});a.offset({top:0,left:0})}g.remove();if(b.onComplete){b.onComplete()}})}function getLocation(a,b,c,d){var c=c<0?c%360+360:c%360;var l=0;var t=0;if(c<45||c>=315){l=$body.width();t=c==0?b:b+(l-a)*Math.tan(c*Math.PI/180)}else if(c>=45&&c<135){t=$body.height();l=c==90?a:a+(t-b)/Math.tan(c*Math.PI/180)}else if(c>=135&&c<225){l=0-d.width();t=c==180?b:b+(l-a)*Math.tan(c*Math.PI/180)}else if(c>=225&&c<315){t=0-d.height();l=c==270?a:a+(t-b)/Math.tan(c*Math.PI/180)}var e={left:l,top:t}return e}})(jQuery);